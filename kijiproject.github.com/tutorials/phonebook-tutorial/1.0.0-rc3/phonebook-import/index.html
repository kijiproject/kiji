
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Import Data</title>
    <meta name="description" content="How to import data into the phonebook table.">
    <meta name="author" content="WibiData">
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/twitter/css/github.css" rel="stylesheet" type="text/css" media="all">
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
    <script src="/assets/themes/twitter/vallenato/vallenato.js" type="text/javascript"></script>
    <link rel="stylesheet" href="/assets/themes/twitter/css/vallenato.css" type="text/css" media="screen">
  </head>

  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="http://www.kiji.org">Kiji Community</a>
          <ul class="nav">
            <li class="dropdown">
              <a href="http://www.kiji.org">The Kiji Project</a>
              <ul class="dropdown-menu">
                <li class="menu-item">
                  <a href="http://www.kiji.org/features">Features</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="http://www.kiji.org/architecture">Architecture</a>
            </li>
            <li class="dropdown">
              <a href="http://www.kiji.org/getstarted/">Get Started</a>
              <ul class="dropdown-menu">
                <li class="menu-item">
                  <a href="http://www.kiji.org/getstarted/#Downloads">Downloads</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getstarted/#Installation">Installation</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getstarted/#Quick_Start_Guide">Quick Start Guide</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/get-started-with-maven">Getting Started with Maven</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getstarted/#Training_Services">
                    Training & Services
                  </a>
                </li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="http://www.kiji.org/getinvolved">Get Involved</a>
              <ul class="dropdown-menu">
                <li class="menu-item">
                  <a href="http://www.kiji.org/getinvolved/#Mailing_Lists">Mailing Lists</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getinvolved/#Source_Code">Source Code</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getinvolved/#Issue_Tracker">Issue Tracking</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getinvolved/#Contributing_to_Kiji">
                    Contributing to Kiji
                  </a>
                </li>
              </ul>
            </li>
            <li class="dropdown active">
              <a href="/">Documentation</a>
              <ul class="dropdown-menu">
                <li class="menu-item">
                  <a href="http://www.kiji.org/getstarted/#Quick_Start_Guide">Quick Start Guide</a>
                </li>
                <li class="menu-item">
                  <a href="/tutorials.html">Tutorials</a>
                </li>
                <li class="menu-item">
                  <a href="/userguides.html">
                    User Guides
                  </a>
                </li>
                <li class="menu-item">
                  <a href="/apidocs">API Reference</a>
                </li>
                <li class="menu-item">
                  <a href="https://github.com/kijiproject/wiki/wiki">Wiki</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="http://www.kiji.org/blog/">Blog</a>
            </li>
            <li>
              <a href="http://www.kiji.org/aboutkiji">About Kiji</a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="content">
        
<div class="row-fluid">
  <div class="span9">
    <div class="page-header">
      <h1>Import Data</h1>
    </div>

    <div class="pagination">
      <ul>
    
      
      
    
      

      
        
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
            
            
              <li class="prev">
                <a href="/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-point-add" title="Read and Write in Kiji">
                &larr; Previous
                </a>
              </li>
            
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
      

      
      
        
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
              <li class="next">
                <a href="/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-derived-columns" title="Derive Data">
                Next &rarr;
                </a>
              </li>
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
      
      </ul>
    </div>

    <p>At this point, you should be worried about wearing out your keyboard by manually running an add command for each of your (incredibly large set of) friends. First, we will discuss and give examples of the naive way of extending <code>AddEntry</code> to load a table, and then present the recommended MapReduce approach.</p>

<h3 id='standalonephonebookimporterjava'>StandalonePhonebookImporter.java</h3>

<p>An example of writing puts in order to load a table is given in <code>StandalonePhonebookImporter</code>. This approach is easier than running the add command for every user, but is still suboptimal because you are using one machine to perform every put.</p>

<h4 id='parsing_the_delimited_phonebook_entries'>Parsing the Delimited Phonebook Entries</h4>

<p>First, let&#8217;s take a closer look at the data we want to import. In <code>$KIJI_HOME/examples/phonebook/input-data.txt</code> you will see records like:\</p>

<blockquote>
<p>John|Doe|johndoe@gmail.com|202-555-9876|{&#8220;addr1&#8221;:&#8221;1600 Pennsylvania Ave&#8221;,&#8221;apt&#8221;:null,&#8221;addr2&#8221;:null,&#8221;city&#8221;:&#8221;Washington&#8221;,&#8221;state&#8221;:&#8221;DC&#8221;,&#8221;zip&#8221;:99999}</p>
</blockquote>

<p>The fields in each record are delimited by a &#8221;|&#8221;, the last field is actually a complete JSON Avro record representing an address.</p>

<p>At the top of the <code>importLine(...)</code> method in <code>StandalonePhonebookImporter</code>, you&#8217;ll see we&#8217;re using a delimiter to split up the record into its&#8217; specific fields:</p>
<div class='highlight'><pre><code class='java'><span class='n'>String</span><span class='o'>[]</span> <span class='n'>fields</span> <span class='o'>=</span> <span class='n'>value</span><span class='o'>.</span><span class='na'>toString</span><span class='o'>().</span><span class='na'>split</span><span class='o'>(</span><span class='s'>&quot;\\|&quot;</span><span class='o'>);</span>
<span class='c1'>//...</span>

<span class='n'>String</span> <span class='n'>firstName</span> <span class='o'>=</span> <span class='n'>fields</span><span class='o'>[</span><span class='mi'>0</span><span class='o'>];</span>
<span class='n'>String</span> <span class='n'>lastName</span> <span class='o'>=</span> <span class='n'>fields</span><span class='o'>[</span><span class='mi'>1</span><span class='o'>];</span>
<span class='n'>String</span> <span class='n'>email</span> <span class='o'>=</span> <span class='n'>fields</span><span class='o'>[</span><span class='mi'>2</span><span class='o'>];</span>
<span class='n'>String</span> <span class='n'>telephone</span> <span class='o'>=</span> <span class='n'>fields</span><span class='o'>[</span><span class='mi'>3</span><span class='o'>];</span>
<span class='n'>String</span> <span class='n'>addressJson</span> <span class='o'>=</span> <span class='n'>fields</span><span class='o'>[</span><span class='mi'>4</span><span class='o'>];</span>
</code></pre></div>
<p>Since our last field is a complex Avro type represented in JSON, we use a JSON decoder with an Avro schema (in this case <code>Address</code>), to decode the field into a complete Avro Address object.</p>
<div class='highlight'><pre><code class='java'><span class='c1'>// addressJson contains a JSON-encoded Avro &quot;Address&quot; record. Parse this into</span>
<span class='c1'>// an object and write it to the person&#39;s record.</span>
<span class='c1'>// The Address record type is generated from src/main/avro/Address.avsc as part</span>
<span class='c1'>// of the build process (see avro-maven-plugin in pom.xml).</span>
<span class='n'>SpecificDatumReader</span><span class='o'>&lt;</span><span class='n'>Address</span><span class='o'>&gt;</span> <span class='n'>datumReader</span> <span class='o'>=</span>
    <span class='k'>new</span> <span class='n'>SpecificDatumReader</span><span class='o'>&lt;</span><span class='n'>Address</span><span class='o'>&gt;(</span><span class='n'>Address</span><span class='o'>.</span><span class='na'>SCHEMA</span><span class='n'>$</span><span class='o'>);</span>
<span class='n'>JsonDecoder</span> <span class='n'>decoder</span> <span class='o'>=</span>
    <span class='n'>DecoderFactory</span><span class='o'>.</span><span class='na'>get</span><span class='o'>().</span><span class='na'>jsonDecoder</span><span class='o'>(</span><span class='n'>Address</span><span class='o'>.</span><span class='na'>SCHEMA</span><span class='n'>$</span><span class='o'>,</span> <span class='n'>addressJson</span><span class='o'>);</span>
<span class='n'>Address</span> <span class='n'>streetAddr</span> <span class='o'>=</span> <span class='n'>datumReader</span><span class='o'>.</span><span class='na'>read</span><span class='o'>(</span><span class='kc'>null</span><span class='o'>,</span> <span class='n'>decoder</span><span class='o'>);</span>
</code></pre></div>
<p>Next we create a unique <a href='http://api-docs.kiji.org/kiji-schema/1.0.0-rc3/org/kiji/schema/EntityId.html'><code>EntityId</code></a> that will be used to reference this row. As before, we will use the combination of first and last name as a unique reference to this row:</p>
<div class='highlight'><pre><code class='java'><span class='n'>EntityId</span> <span class='n'>user</span> <span class='o'>=</span> <span class='n'>table</span><span class='o'>.</span><span class='na'>getEntityId</span><span class='o'>(</span><span class='n'>firstName</span> <span class='o'>+</span> <span class='s'>&quot;,&quot;</span> <span class='o'>+</span> <span class='n'>lastName</span><span class='o'>);</span>
</code></pre></div>
<p>Finally we just retrieve the current system timestamp and write these record fields.</p>
<div class='highlight'><pre><code class='java'><span class='kt'>long</span> <span class='n'>timestamp</span> <span class='o'>=</span> <span class='n'>System</span><span class='o'>.</span><span class='na'>currentTimeMillis</span><span class='o'>();</span>
<span class='n'>writer</span><span class='o'>.</span><span class='na'>put</span><span class='o'>(</span><span class='n'>user</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>INFO_FAMILY</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>FIRST_NAME</span><span class='o'>,</span> <span class='n'>timestamp</span><span class='o'>,</span> <span class='n'>firstName</span><span class='o'>);</span>
<span class='n'>writer</span><span class='o'>.</span><span class='na'>put</span><span class='o'>(</span><span class='n'>user</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>INFO_FAMILY</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>LAST_NAME</span><span class='o'>,</span> <span class='n'>timestamp</span><span class='o'>,</span> <span class='n'>lastName</span><span class='o'>);</span>
<span class='n'>writer</span><span class='o'>.</span><span class='na'>put</span><span class='o'>(</span><span class='n'>user</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>INFO_FAMILY</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>EMAIL</span><span class='o'>,</span> <span class='n'>timestamp</span><span class='o'>,</span> <span class='n'>email</span><span class='o'>);</span>
<span class='n'>writer</span><span class='o'>.</span><span class='na'>put</span><span class='o'>(</span><span class='n'>user</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>INFO_FAMILY</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>TELEPHONE</span><span class='o'>,</span> <span class='n'>timestamp</span><span class='o'>,</span> <span class='n'>telephone</span><span class='o'>);</span>
<span class='n'>writer</span><span class='o'>.</span><span class='na'>put</span><span class='o'>(</span><span class='n'>user</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>INFO_FAMILY</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>ADDRESS</span><span class='o'>,</span> <span class='n'>timestamp</span><span class='o'>,</span> <span class='n'>streetAddr</span><span class='o'>);</span>
</code></pre></div>
<h3 id='running_the_example'>Running the Example</h3>

<p>You can execute <code>StandalonePhonebookImporter</code> just like you would the <code>AddEntry</code> example - using the <code>kiji jar</code> command.</p>
<div class='userinput'>

<div class='highlight'><pre><code class='bash'><span class='nv'>$KIJI_HOME</span>/bin/kiji jar <span class='se'>\</span>
    <span class='nv'>$KIJI_HOME</span>/examples/phonebook/lib/kiji-phonebook-1.0.0-rc3.jar <span class='se'>\</span>
    org.kiji.examples.phonebook.StandalonePhonebookImporter <span class='se'>\</span>
    <span class='nv'>$KIJI_HOME</span>/examples/phonebook/input-data.txt
</code></pre></div>

</div>
<p>You now have data in your phonebook table!</p>

<h4 id='verify'>Verify</h4>

<p>Verify that the user records were added properly by executing:</p>
<div class='userinput'>

<div class='highlight'><pre><code class='bash'><span class='nv'>$KIJI_HOME</span>/bin/kiji ls --table<span class='o'>=</span>phonebook
</code></pre></div>

</div>
<h2 id='importing_data_using_mapreduce'>Importing Data using MapReduce</h2>

<p>While the above example does import the requisite data, it doesn&#8217;t scale to large data sets, because it doesn&#8217;t take advantage of the cluster you are writing to. Instead of generating all puts locally like we did above, we will write a MapReduce job that reads from text file in HDFS and writes to your Kiji table by generating puts in a distributed fashion.</p>

<h3 id='phonebookimporterjava'>PhonebookImporter.java</h3>

<p>Our example of importing data into a table with MapReduce can be found in the class <code>PhonebookImporter</code>. PhonebookImporter defines a map-only MapReduce job that reads each line of our input file, parses it, and writes it to a table.</p>

<p>The first thing we&#8217;ll want to look at is the <code>setup()</code> method (which Hadoop will call before executing any map tasks):</p>

<p><div class='highlight'><pre><code class='java'><span class='cm'>/** {@inheritDoc} */</span>
<span class='nd'>@Override</span>
<span class='kd'>protected</span> <span class='kt'>void</span> <span class='nf'>setup</span><span class='o'>(</span><span class='n'>Context</span> <span class='n'>hadoopContext</span><span class='o'>)</span>
    <span class='kd'>throws</span> <span class='n'>IOException</span><span class='o'>,</span> <span class='n'>InterruptedException</span> <span class='o'>{</span>
  <span class='kd'>super</span><span class='o'>.</span><span class='na'>setup</span><span class='o'>(</span><span class='n'>hadoopContext</span><span class='o'>);</span>
  <span class='kd'>final</span> <span class='n'>Configuration</span> <span class='n'>conf</span> <span class='o'>=</span> <span class='n'>hadoopContext</span><span class='o'>.</span><span class='na'>getConfiguration</span><span class='o'>();</span>
  <span class='n'>KijiURI</span> <span class='n'>tableURI</span><span class='o'>;</span>
  <span class='k'>try</span> <span class='o'>{</span>
    <span class='n'>tableURI</span> <span class='o'>=</span> <span class='n'>KijiURI</span><span class='o'>.</span><span class='na'>parse</span><span class='o'>(</span><span class='n'>conf</span><span class='o'>.</span><span class='na'>get</span><span class='o'>(</span><span class='n'>KijiConfKeys</span><span class='o'>.</span><span class='na'>OUTPUT_KIJI_TABLE_URI</span><span class='o'>));</span>
  <span class='o'>}</span> <span class='k'>catch</span> <span class='o'>(</span><span class='n'>KijiURIException</span> <span class='n'>kue</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='k'>throw</span> <span class='k'>new</span> <span class='nf'>IOException</span><span class='o'>(</span><span class='n'>kue</span><span class='o'>);</span>
  <span class='o'>}</span>
  <span class='n'>mKiji</span> <span class='o'>=</span> <span class='n'>Kiji</span><span class='o'>.</span><span class='na'>open</span><span class='o'>(</span><span class='n'>tableURI</span><span class='o'>,</span> <span class='n'>conf</span><span class='o'>);</span>
  <span class='n'>mTable</span> <span class='o'>=</span> <span class='n'>mKiji</span><span class='o'>.</span><span class='na'>openTable</span><span class='o'>(</span><span class='n'>TABLE_NAME</span><span class='o'>);</span>
  <span class='n'>mWriter</span> <span class='o'>=</span> <span class='n'>mTable</span><span class='o'>.</span><span class='na'>openTableWriter</span><span class='o'>();</span>
<span class='o'>}</span>
</code></pre></div></p>

<p>This method sets up all the resources necessary for map tasks. Note that we use a different way to specify Kiji table and instance names here, a <a href='http://api-docs.kiji.org/kiji-schema/1.0.0-rc3/org/kiji/schema/KijiURI.html'><code>KijiURI</code></a>. This newer way to specify Kiji instance addresses is more robust than specifying the instance name as a string.</p>

<p>At the top of the map method, you&#8217;ll see that we extract the fields from the lines as the above example. Then using the <code>KijiTableWriter</code> mWriter that is initialized earlier in setup, we&#8217;ll write all of the fields to the phonebook table:</p>

<p><div class='highlight'><pre><code class='java'><span class='nd'>@Override</span>
<span class='kd'>public</span> <span class='kt'>void</span> <span class='nf'>map</span><span class='o'>(</span><span class='n'>LongWritable</span> <span class='n'>byteOffset</span><span class='o'>,</span> <span class='n'>Text</span> <span class='n'>line</span><span class='o'>,</span> <span class='n'>Context</span> <span class='n'>context</span><span class='o'>)</span>
    <span class='kd'>throws</span> <span class='n'>IOException</span><span class='o'>,</span> <span class='n'>InterruptedException</span> <span class='o'>{</span>
  <span class='o'>...</span>
  <span class='n'>mWriter</span><span class='o'>.</span><span class='na'>put</span><span class='o'>(</span><span class='n'>user</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>INFO_FAMILY</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>FIRST_NAME</span><span class='o'>,</span> <span class='n'>firstName</span><span class='o'>);</span>
  <span class='n'>mWriter</span><span class='o'>.</span><span class='na'>put</span><span class='o'>(</span><span class='n'>user</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>INFO_FAMILY</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>LAST_NAME</span><span class='o'>,</span> <span class='n'>lastName</span><span class='o'>);</span>
  <span class='n'>mWriter</span><span class='o'>.</span><span class='na'>put</span><span class='o'>(</span><span class='n'>user</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>INFO_FAMILY</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>EMAIL</span><span class='o'>,</span> <span class='n'>email</span><span class='o'>);</span>
  <span class='n'>mWriter</span><span class='o'>.</span><span class='na'>put</span><span class='o'>(</span><span class='n'>user</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>INFO_FAMILY</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>TELEPHONE</span><span class='o'>,</span> <span class='n'>telephone</span><span class='o'>);</span>
  <span class='n'>mWriter</span><span class='o'>.</span><span class='na'>put</span><span class='o'>(</span><span class='n'>user</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>INFO_FAMILY</span><span class='o'>,</span> <span class='n'>Fields</span><span class='o'>.</span><span class='na'>ADDRESS</span><span class='o'>,</span> <span class='n'>streetAddr</span><span class='o'>);</span>
<span class='o'>}</span>
</code></pre></div></p>

<p>When the map task is complete, a <code>cleanup()</code> method will close the Kiji resources opened in <code>setup()</code>.</p>

<p>The outer <code>PhonebookImporter</code> class contains a <code>run(...)</code> method that handles the setup of the MapReduce job. This is a typical MapReduce job setup. For detailed description you can refer to <a href='/userguides/schema/1.0.0-rc3/accessing-data/'>Accessing Data</a>. While the logic here closely resembles the non-MapReduce importer above, the heavy lifting of configuring the MapReduce job is done within the <code>run(...)</code> method.</p>

<p>The mapper class is specified as the inner class <code>PhonebookImportMapper</code>:</p>
<div class='highlight'><pre><code class='java'><span class='n'>job</span><span class='o'>.</span><span class='na'>setMapperClass</span><span class='o'>(</span><span class='n'>PhonebookImportMapper</span><span class='o'>.</span><span class='na'>class</span><span class='o'>);</span>
</code></pre></div>
<p>The hdfs file path to the sample input data is set to the first command line argument here:</p>
<div class='highlight'><pre><code class='java'><span class='n'>FileInputFormat</span><span class='o'>.</span><span class='na'>setInputPaths</span><span class='o'>(</span><span class='n'>job</span><span class='o'>,</span> <span class='k'>new</span> <span class='n'>Path</span><span class='o'>(</span><span class='n'>args</span><span class='o'>[</span><span class='mi'>0</span><span class='o'>]));</span>
</code></pre></div>
<p>Also note that we&#8217;ve set the number of reduce tasks to 0 because we don&#8217;t have any reduce tasks to perform.</p>
<div class='highlight'><pre><code class='java'><span class='n'>job</span><span class='o'>.</span><span class='na'>setNumReduceTasks</span><span class='o'>(</span><span class='mi'>0</span><span class='o'>);</span>
</code></pre></div>
<p>Since we use the <code>KijiTableWriter</code> directly, and don&#8217;t emit key-value pairs to an OutputFormat, we disable this feature of MapReduce:</p>
<div class='highlight'><pre><code class='java'><span class='n'>job</span><span class='o'>.</span><span class='na'>setOutputFormatClass</span><span class='o'>(</span><span class='n'>NullOutputFormat</span><span class='o'>.</span><span class='na'>class</span><span class='o'>);</span>
</code></pre></div>
<h3 id='running_the_example'>Running the Example</h3>

<p>First you&#8217;ll need to put the text file of friends into hdfs. You can do this by using the hdfs <code>-copyFromLocal</code> command:</p>
<div class='userinput'>

<div class='highlight'><pre><code class='bash'><span class='nv'>$HADOOP_HOME</span>/bin/hadoop fs -copyFromLocal <span class='se'>\</span>
    <span class='nv'>$KIJI_HOME</span>/examples/phonebook/input-data.txt /tmp
</code></pre></div>

</div>
<p>You can then use the <code>kiji jar</code> command to execute the MapReduce job. To use the jar command, specify the jar file the <code>PhonebookImporter</code> class and the path to the <code>input-data.txt</code> file in hdfs.</p>
<div class='userinput'>

<div class='highlight'><pre><code class='bash'><span class='nv'>$KIJI_HOME</span>/bin/kiji jar <span class='se'>\</span>
    <span class='nv'>$KIJI_HOME</span>/examples/phonebook/lib/kiji-phonebook-1.0.0-rc3.jar <span class='se'>\</span>
    org.kiji.examples.phonebook.PhonebookImporter <span class='se'>\</span>
    /tmp/input-data.txt
</code></pre></div>

</div>
<p>You now have data in your phonebook table!</p>

<h4 id='verify'>Verify</h4>

<p>Verify that the user records were added properly by executing:</p>
<div class='userinput'>

<div class='highlight'><pre><code class='bash'><span class='nv'>$KIJI_HOME</span>/bin/kiji ls --table<span class='o'>=</span>phonebook
</code></pre></div>

</div>
<p>Here&#8217;s what the first entry should look like:</p>

<pre><code>Scanning kiji table: kiji://localhost:2181/default/phonebook/
U\x1EP\xC1\xF2c$7\xCC\xBA\xCB\x16\x10\x0F\x11\xDB [1352513223503] info:firstname
                                 John
U\x1EP\xC1\xF2c$7\xCC\xBA\xCB\x16\x10\x0F\x11\xDB [1352513223504] info:lastname
                                 Doe
U\x1EP\xC1\xF2c$7\xCC\xBA\xCB\x16\x10\x0F\x11\xDB [1352513223505] info:email
                                 johndoe@gmail.com
U\x1EP\xC1\xF2c$7\xCC\xBA\xCB\x16\x10\x0F\x11\xDB [1352513223505] info:telephone
                                 202-555-9876
U\x1EP\xC1\xF2c$7\xCC\xBA\xCB\x16\x10\x0F\x11\xDB [1352513223506] info:address
                                 {&quot;addr1&quot;: &quot;1600 Pennsylvania Ave&quot;, &quot;apt&quot;: null, &quot;addr2&quot;: null, &quot;city&quot;: &quot;Washington&quot;, &quot;state&quot;: &quot;DC&quot;, &quot;zip&quot;: 99999}</code></pre>

    <div class="pagination">
      <ul>
    
      
      
    
      

      
        
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
            
            
              <li class="prev">
                <a href="/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-point-add" title="Read and Write in Kiji">
                &larr; Previous
                </a>
              </li>
            
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
      

      
      
        
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
              <li class="next">
                <a href="/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-derived-columns" title="Derive Data">
                Next &rarr;
                </a>
              </li>
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
      
      </ul>
    </div>
  </div>

  <div class="span3">
    
      
      
    
    <div class="side-toc">
    <div class="side-toc-inner">
      <h3>Phonebook Tutorial</h3>
      <ul>
        
          
          
            
              
            
          
            
              
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-tutorial">Overview</a>
                  
                </li>
              
            
          
            
              
            
          
            
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-setup">Setup</a>
                  
                </li>
              
            
          
            
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
            
          
            
              
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-create">Create a Table</a>
                  
                </li>
              
            
          
            
              
            
          
            
              
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
            
          
            
              
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-point-add">Read and Write in Kiji</a>
                  
                </li>
              
            
          
            
              
            
          
            
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
                <li>
                  
                    <b>Import Data</b>
                  
                </li>
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-derived-columns">Derive Data</a>
                  
                </li>
              
            
          
            
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
            
          
            
              
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-increment">Use Counters</a>
                  
                </li>
              
            
          
            
              
            
          
            
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-delete">Delete Contacts</a>
                  
                </li>
              
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
      </ul>
      <h3>Need Help?</h3>
      <ul>
        <li>
      <a class="btn btn-info"  href="https://groups.google.com/a/kiji.org/forum/?fromgroups#!forum/user">User Group Mailing List</a>
        </li>
        <li>
      <a class="btn btn-warning" href="https://jira.kiji.org/secure/CreateIssueDetails!init.jspa?pid=10004&issuetype=1&priority=3&components=10010&summary=Reported%20Docs%20Error:%20Import Data&description=Please%20describe%20the%20issue.%0a%0aurl:%20/tutorials/phonebook-tutorial/1.0.0-rc3/phonebook-import"> Report an Error in Docs </a> 
        </li>
    </ul>
    </div>
</div>

  </div>
</div>


      </div>

      <footer>
        <hr/>
        <p>&copy; Kiji Community</p>
      </footer>
    </div>

    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35866189-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>

